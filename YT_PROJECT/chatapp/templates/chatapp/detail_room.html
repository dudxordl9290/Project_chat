{% extends "base.html" %}
{% load static %}

{% block content %}
<br>
<div class="row justify-content-center">
    <h1 style="text-align: center; margin-bottom: 20px;">{{room.room_title}}</h1>

    <div class="col-8">
        <div class="card">
            <div class="card-body">
                <p class="card-text">{{room.room_content}}
                </p>
                <hr width ="100%" size = "3">
            </div>
                <div id="carouselExampleControls" class="carousel slide" data-interval="false">
                    <div class="carousel-inner">
                    {% if room.room_image1 != '' %}
                    <div class="carousel-item active">
                        <img src="{{room.room_image1.url}}" class="d-block w-40" alt="..." style="margin:auto">
                    </div>
                    {% endif %}
                    {% if room.room_image2 != '' %}
                    <div class="carousel-item">
                        <img src="{{room.room_image2.url}}" class="d-block w-40" alt="...">
                    </div>
                    {% endif %}
                    {% if room.room_image3 != '' %}
                    <div class="carousel-item">
                        <img src="{{room.room_image3.url}}" class="d-block w-40" alt="...">
                    </div>
                    {% endif %}
                    </div>

                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                    </button>
              </div>
        </div>
    </div>
    <br>
    <div style="text-align: center; margin-top: 20px;">
        <a href="/room_list/" class="btn btn-primary ">목록</a>
    </div>
</div>

<!--리뷰-->
<div class="row justify-content-center">
    <div style="height: 50px;"></div>
    <hr width ="100%" size = "3">
    <h3 class="col-8" style="text-align: left; margin-bottom: 20px;"> Review </h3>

    <div class="col-8">
        <button type="button" class="btn btn-light" style="margin:left;" data-bs-toggle="collapse" 
                data-bs-target="#collapseWidthExample" aria-expanded="false" aria-controls="collapseWidthExample">
            <img width="20px" height="20px" src="{% static 'chatapp/imgs/review_icon.png' %}">
        </button>
    </div>

    <!--input review / collapse-->
    <div class="col-8">
        <div class="collapse collapse-horizontal" id="collapseWidthExample">
        <form action="/make_review/{{room.id}}/" method="POST">
            {% csrf_token %}
            <textarea class="form-control" placeholder="Write here your Review" name="review_content" height="100%" style="float: left;" required></textarea>
            <button type="submit" style="float: right; color:black; margin: 3px 0 10px 0 ;" class="btn btn-outline-primary btn-sm">complete</button>
        </form>
        </div>
    </div>

    <div class="col-8">
        {% if review %}
            {% for n in review %}
                <div class="card" style="border-color: rgb(184, 222, 240); margin-bottom: 5px;  padding: 20px;">
                    <p class="card-text">{{n.review_content}}</p>
                    <p class="card-text text-end" style="font-size: 10px;">작성자:{{n.review_creater}}
                    <br> {{n.review_date}}</p>
                </div>
            {% endfor %}        
        {% else %}
        <hr width ="100%" size = "3">
        <div height="150px">
            <p style="text-align: center;">Have no review</p>
        </div>
        {% endif %}
        
       
    </div>

</div>

{% if room.room_creater == user %}
<div class="row justify-content-center">
    <a href="/modify_room/{{room.id}}/" style="color:white; margin: 3px 0 10px 0;" class="btn btn-primary col-6">Modify</a>
</div>
<div class="row justify-content-center">
    <a href="/delete_room/{{room.id}}/" style="color:white; margin: 3px 0 10px 0;" class="btn btn-danger col-6">Delete</a>
</div>

{% endif %}

{% endblock %}